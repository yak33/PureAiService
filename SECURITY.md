# 安全政策

## 支持的版本

我们目前为以下版本提供安全更新：

| 版本 | 支持状态 |
| --- | --- |
| 1.x.x | ✅ |
| < 1.0 | ❌ |

## 报告漏洞

我们非常重视项目的安全性。如果你发现了安全漏洞，请按照以下步骤操作：

### 🔒 私密报告

**请勿在公开 Issue 中报告安全漏洞。**

1. **发送邮件**（推荐）
   - 主题：`[SECURITY] 简要描述漏洞`
   - 内容包括：
     - 漏洞的详细描述
     - 受影响的版本
     - 复现步骤
     - 潜在影响
     - 如有可能，提供修复建议

2. **GitHub Security Advisory**
   - 访问项目的 Security 标签
   - 点击 "Report a vulnerability"
   - 填写漏洞详情

### 📋 报告应包含

- **漏洞类型**：SQL注入、XSS、认证绕过等
- **影响范围**：哪些组件或功能受影响
- **严重程度**：低/中/高/严重
- **复现步骤**：详细的步骤说明
- **环境信息**：操作系统、Python版本、浏览器等
- **PoC代码**（如有）：概念验证代码

### ⏱️ 响应时间

- **首次响应**：72小时内
- **初步评估**：1周内
- **修复时间**：根据严重程度
  - 严重：7天内
  - 高：14天内
  - 中：30天内
  - 低：下一个版本发布

### 🛡️ 漏洞处理流程

1. **接收报告** - 我们确认收到你的报告
2. **评估严重性** - 确定漏洞的影响和优先级
3. **开发修复** - 创建并测试修复方案
4. **发布更新** - 发布包含修复的新版本
5. **公开披露** - 在适当的时间公开漏洞详情

### 🎖️ 安全致谢

我们会在项目中感谢报告漏洞的研究人员（除非你希望保持匿名）。

## 安全最佳实践

### 对于使用者

1. **使用最新版本**
   - 始终使用最新的稳定版本
   - 关注安全更新通知

2. **环境变量安全**
   - 不要在代码中硬编码敏感信息
   - 使用 `.env` 文件管理配置
   - 确保 `.env` 文件不被提交到版本控制

3. **API密钥管理**
   - 定期轮换API密钥
   - 使用环境变量存储密钥
   - 限制API密钥的权限范围

4. **HTTPS部署**
   - 生产环境必须使用HTTPS
   - 配置适当的SSL/TLS证书
   - 启用HSTS

5. **访问控制**
   - 使用强密码
   - 定期更新密码
   - 启用必要的认证机制

6. **依赖更新**
   ```bash
   # Python依赖
   pip list --outdated
   pip install --upgrade package-name
   
   # 前端依赖
   pnpm outdated
   pnpm update
   ```

### 对于开发者

1. **输入验证**
   - 验证所有用户输入
   - 使用Pydantic进行数据验证
   - 防止SQL注入和XSS攻击

2. **认证和授权**
   - 正确实施JWT认证
   - 验证所有API端点的权限
   - 使用安全的密码哈希算法

3. **依赖安全**
   ```bash
   # 检查Python依赖漏洞
   pip install safety
   safety check
   
   # 检查前端依赖漏洞
   pnpm audit
   ```

4. **代码审查**
   - 所有PR都需要代码审查
   - 关注安全相关的代码变更
   - 使用静态代码分析工具

## 已知安全考虑

### 当前实施的安全措施

- ✅ JWT Token认证
- ✅ 密码哈希存储
- ✅ 滑块验证码
- ✅ CORS配置
- ✅ 文件上传验证
- ✅ API请求日志

### 计划中的安全改进

- ⏳ Rate Limiting（速率限制）
- ⏳ 更细粒度的权限控制
- ⏳ 双因素认证（2FA）
- ⏳ API密钥管理
- ⏳ 安全审计日志

## 常见安全问题

### Q: 如何安全地存储API密钥？
**A:** 使用环境变量（`.env`文件）存储，不要提交到Git仓库。

### Q: 默认的JWT密钥安全吗？
**A:** 不安全。请在生产环境中设置强随机的 `JWT_SECRET_KEY`。

### Q: 如何防止暴力破解登录？
**A:** 建议实施速率限制和账户锁定机制。

### Q: 文件上传有什么安全限制？
**A:** 已实施文件大小和类型限制，建议额外进行病毒扫描。

## 安全资源

- [OWASP Top 10](https://owasp.org/www-project-top-ten/)
- [Python Security Best Practices](https://python.readthedocs.io/en/stable/library/security_warnings.html)
- [FastAPI Security](https://fastapi.tiangolo.com/tutorial/security/)
- [Vue.js Security](https://vuejs.org/guide/best-practices/security.html)

## 联系方式

如有任何安全相关的问题，请通过以下方式联系：

- 📧 邮件：[安全联系邮箱]
- 🔒 GitHub Security Advisory

---

**感谢你帮助我们保持项目安全！** 🛡️
